<!DOCTYPE html>
<head>
<meta charset="UTF-8">
<title>Stock Patterns Founder</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
<link rel="stylesheet" href="/resources/demos/style.css">
<!-- <link rel="stylesheet" href="{{ url_for('static', filename='styles/style.css') }}"/> -->
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<style> body {font-family: 微软雅黑;} </style>
</head>
<body>
<div class="container">
  <br>
  <h2>Stock Patterns Founder</h2>
  <p>To get the stock patterns</p>
  <div class="row" >
    <form action="/getStockPatterns" method="get" target="_blank">
      <table>
        <tr>
          <th>Date:</th>
          <td>
            <input id="trading_date" name="trading_date" type="date" required>
          </td>
        </tr>
        <tr>
          <th>Volume Range:</th>
          <td>
            <input class="sliderinput" id="min_volume" name="min_volume" step="0.1" type="number" placeholder="0.0" style="border: 1px solid #ddd; font-weight:bold; text-align:center; width:75px; padding-bottom: 0px; padding-top: 0px;">M - 
            <input class="sliderinput" id="max_volume" name="max_volume" step="0.1" type="number" placeholder="0.0" style="border: 1px solid #ddd; font-weight:bold; text-align:center; width:75px; padding-bottom: 0px; padding-top: 0px;">M
            <div id="slider_range" name="slider_range"></div>
          </td>
        </tr>
        <tr>
          <th>Pattern:</th>
          <td>
            <select id="pattern_name" name="pattern_name" required>
              <option selected="selected" value="SEPA">SEPA</option>
              <option value="SEPA2">SEPA2</option>
              <option value="SEPA3">SEPA3</option>
              <option value="CUP_HANDLE">Cup & Handle</option>
            </select>
          </td>
        </tr>
        <tr>
          <td>
            <button type="submit" formaction="/getStockPatterns" id="getStockPatterns">Find patterns</button>
          </td>
        </tr>
        <tr>
          <td>
            <button type="submit" formaction="/compareStockPatterns" id="compareStockPatterns">Compare SEPA patterns</button>
          </td>
        </tr>
      </table>
      <br>
    </form>
  </div>
</div>
</body>
<script>
$(function(){
  var $trading_date = $("#trading_date");
  var date = new Date();
  date.setDate(date.getDate() - 1);
  var day = ("0" + date.getDate()).slice(-2);
  var month = ("0" + (date.getMonth() + 1)).slice(-2);
  var year = date.getFullYear();
  var today = year + "-" + month + "-" + day;
  $trading_date.val(today);

  $("#slider_range").slider({
      range: true,
      step: 1,
      min: 0,
      max: 10000,
      values: [ 1000, 10000 ],
      slide: function(event, ui) {
        $("#min_volume").val(ui.values[0]);
        $("#max_volume").val(ui.values[1]);
      }
  });
     
  $("#min_volume").val($("#slider_range").slider("values", 0));
  $("#max_volume").val($("#slider_range").slider("values", 1));
  console.log(
      $("#min_volume").val() );
  $('#min_volume').on('input', function() {
    if ($(this).val() < $("#max_volume").val()) {
      $("#slider_range").slider('values', 0, $(this).val());
    }
  });

  $('#max_volume').on('input', function() {
    if ($(this).val() > $("#min_volume").val()) {
      $("#slider_range").slider('values', 1, $(this).val());
    }
  });
});
</script>
</html>